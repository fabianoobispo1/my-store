import{cZ as p,u as S,r as u,j as n,b as P,c_ as E,J as R,c$ as v,c as b,Z as w}from"./index-COdTnWJD.js";var m=u.createContext(null),y=()=>{const t=u.useContext(m);if(!t)throw new Error("useRouteModal must be used within a RouteModalProvider");return t},F=t=>{const c=b();return u.useMemo(()=>{var s;const e=(s=c.state)==null?void 0:s.restore_params;return e?`${t}?${e.toString()}`:c.search?`${t}${c.search}`:t},[c.state,c.search,t])},k=({form:t,blockSearchParams:c=!1,children:i,onClose:e})=>{const{t:s}=P(),{formState:{isDirty:d}}=t,a=E(({currentLocation:r,nextLocation:h})=>{const{isSubmitSuccessful:f}=h.state||{};if(f)return e==null||e(!0),!1;const x=r.pathname!==h.pathname,j=r.search!==h.search;if(c){const O=d&&(x||j);return x&&(e==null||e(f)),O}const M=d&&x;return x&&(e==null||e(f)),M}),l=()=>{var r;(r=a==null?void 0:a.reset)==null||r.call(a)},o=()=>{var r;(r=a==null?void 0:a.proceed)==null||r.call(a),e==null||e(!1)};return n.jsxs(R,{...t,children:[i,n.jsx(v,{open:a.state==="blocked",variant:"confirmation",children:n.jsxs(v.Content,{children:[n.jsxs(v.Header,{children:[n.jsx(v.Title,{children:s("general.unsavedChangesTitle")}),n.jsx(v.Description,{children:s("general.unsavedChangesDescription")})]}),n.jsxs(v.Footer,{children:[n.jsx(v.Cancel,{onClick:l,type:"button",children:s("actions.cancel")}),n.jsx(v.Action,{onClick:o,type:"button",children:s("actions.continue")})]})]})})]})},C=({prev:t,children:c})=>{const i=S(),[e,s]=u.useState(!0),d=u.useCallback(l=>{i(l||t,{replace:!0,state:{isSubmitSuccessful:!0}})},[i,t]),a=u.useMemo(()=>({handleSuccess:d,setCloseOnEscape:s,__internal:{closeOnEscape:e}}),[d,s,e]);return n.jsx(m.Provider,{value:a,children:c})},g=u.createContext(null),D=({children:t,onOpenChange:c})=>{const[i,e]=u.useState({}),s=o=>i[o]||!1,d=(o,r)=>{e(h=>({...h,[o]:r})),c(r)},a=o=>{e(r=>({...r,[o]:!1}))},l=o=>{e(r=>{const h={...r};return delete h[o],h})};return n.jsx(g.Provider,{value:{getIsOpen:s,setIsOpen:d,register:a,unregister:l},children:t})},K=()=>{const t=u.useContext(g);if(!t)throw new Error("useStackedModal must be used within a StackedModalProvider");return t},T=({prev:t="..",children:c})=>{const i=S(),[e,s]=u.useState(!1),[d,a]=u.useState(!1),l=F(t);u.useEffect(()=>(s(!0),()=>{s(!1),a(!1)}),[]);const o=r=>{if(!r){document.body.style.pointerEvents="auto",i(l,{replace:!0});return}s(r)};return n.jsx(p,{open:e,onOpenChange:o,children:n.jsx(C,{prev:l,children:n.jsx(D,{onOpenChange:a,children:n.jsx(_,{stackedModalOpen:d,children:c})})})})},_=({stackedModalOpen:t,children:c})=>{const{__internal:i}=y(),e=!i.closeOnEscape;return n.jsx(p.Content,{onEscapeKeyDown:e?s=>{s.preventDefault()}:void 0,className:w({"!bg-ui-bg-disabled !inset-x-5 !inset-y-3":t}),children:c})},B=p.Header,$=p.Title,H=p.Description,A=p.Footer,I=p.Body,N=p.Close,Z=k,q=Object.assign(T,{Header:B,Title:$,Body:I,Description:H,Footer:A,Close:N,Form:Z});export{q as R,D as S,K as a,k as b,F as c,C as d,y as u};
