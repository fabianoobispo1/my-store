import{u as _,a as O,b as q}from"./chunk-ZJRFL6ZN-Cok7btbB.js";import{u as H,_ as L}from"./chunk-YTN73JYH-CUJ2QIAI.js";import{S as M,a as N}from"./chunk-XXBP2Z5M-BarMMowL.js";import{b as Q,r as i,eq as X,k as Z,j as r,B as k,g as J,a3 as y}from"./index-COdTnWJD.js";var u=50,m="cg",j=t=>t.reduce((e,a)=>(e[a.id]=!0,e),{}),ee=({state:t,setState:e,type:a})=>{const{t:o}=Q(),[c,p]=i.useState(j(t)),[f,h]=i.useState(t);i.useEffect(()=>{p(j(t)),h(t)},[t]);const{searchParams:w,raw:v}=_({pageSize:u,prefix:m}),{customer_groups:l,count:S,isLoading:I,isError:P,error:R}=X({...w,fields:"id,name,customers.id"},{placeholderData:Z}),E=n=>{const x=typeof n=="function"?n(c):n,C=Object.keys(c),b=Object.keys(x),A=b.filter(s=>!C.includes(s)),D=C.filter(s=>!b.includes(s)),F=(l==null?void 0:l.filter(s=>A.includes(s.id)).map(s=>({id:s.id,name:s.name})))||[],B=f.filter(s=>!D.includes(s.id));h([...B,...F]),p(x)},G=()=>{e(f)},z=O(),g=U(),{table:T}=H({data:l||[],columns:g,count:S,enablePagination:!0,enableRowSelection:!0,getRowId:n=>n.id,rowSelection:{state:c,updater:E},pageSize:u,prefix:m}),d=a==="focus"?M:N;if(P)throw R;return r.jsxs("div",{className:"flex size-full flex-col overflow-hidden",children:[r.jsx(d.Body,{className:"min-h-0 p-0",children:r.jsx(L,{table:T,columns:g,pageSize:u,count:S,isLoading:I,filters:z,orderBy:[{key:"name",label:o("fields.name")},{key:"created_at",label:o("fields.createdAt")},{key:"updated_at",label:o("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:m,queryObject:v})}),r.jsxs(d.Footer,{children:[r.jsx(d.Close,{asChild:!0,children:r.jsx(k,{variant:"secondary",size:"small",type:"button",children:o("actions.cancel")})}),r.jsx(k,{type:"button",size:"small",onClick:G,children:o("actions.save")})]})]})},K=J(),U=()=>{const t=q();return i.useMemo(()=>[K.display({id:"select",header:({table:e})=>r.jsx(y,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:a=>e.toggleAllPageRowsSelected(!!a)}),cell:({row:e})=>r.jsx(y,{checked:e.getIsSelected(),onCheckedChange:a=>e.toggleSelected(!!a),onClick:a=>{a.stopPropagation()}})}),...t],[t])};export{ee as P};
