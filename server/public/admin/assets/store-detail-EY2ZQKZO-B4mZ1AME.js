import{u as pe,a as me,b as ge}from"./chunk-NEZX6265-BZdBomHB.js";import{u as xe,a as he}from"./chunk-XNIVMZHA-7G_7qry_.js";import{r as y,e as fe,d as te,v as je,a as ve,j as e,ej as _e,f3 as ye,f4 as Se,q as Z,b as C,f0 as Ce,w as be,dl as we,C as G,H as K,a4 as d,A as k,P as Pe,ao as P,L as Q,y as ke,f5 as A,h as D,an as re,am as f,f6 as Te,g as ae,a3 as N,k as ne,t as j,T as ce}from"./index-COdTnWJD.js";import{S as Le}from"./chunk-ADOCJB6L-BM3WkecS.js";import{u as oe,_ as ie}from"./chunk-YTN73JYH-CUJ2QIAI.js";import"./chunk-GU5PJRPM-Du_6H0D9.js";import{S as Ee}from"./chunk-GIZFNLKK-yZY4MngQ.js";import{X as ze}from"./x-circle-Biw9X4jW.js";import"./chunk-MSDRGCRR-KYQ-t3VP.js";import"./chunk-P3UUX2T6-K6AGHv25.js";import"./chunk-C76H5USB-B0s8aZMb.js";import"./chunk-HQKGZADC-CAHP7YxT.js";import"./chunk-EMIHDNB7-LC-ycJ86.js";import"./chunk-DZWH2RV6-Db7ViQ77.js";import"./index-C_3Mvj6f.js";import"./Trans-BZWDSPrC.js";var Ie=Object.defineProperty,O=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ee=(s,t,r)=>t in s?Ie(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Re=(s,t)=>{for(var r in t||(t={}))le.call(t,r)&&ee(s,r,t[r]);if(O)for(var r of O(t))de.call(t,r)&&ee(s,r,t[r]);return s},Ne=(s,t)=>{var r={};for(var a in s)le.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&O)for(var a of O(s))t.indexOf(a)<0&&de.call(s,a)&&(r[a]=s[a]);return r};const ue=y.forwardRef((s,t)=>{var r=s,{color:a="currentColor"}=r,i=Ne(r,["color"]);return y.createElement("svg",Re({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},i),y.createElement("path",{stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.5 13.945a6.444 6.444 0 1 0 0-12.89 6.444 6.444 0 0 0 0 12.89"}),y.createElement("path",{stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m4.611 7.722 2 2.223 3.778-4.89"}))});ue.displayName="CheckCircle";var Oe=()=>({queryKey:Se.details(),queryFn:async()=>ye()}),ns=async()=>{const s=Oe();return Z.getQueryData(s.queryKey)??await Z.fetchQuery(s)},Ae=({store:s})=>{var v,x,m,_,g,o;const{t}=C(),r=te("translation"),{region:a}=Ce(s.default_region_id,void 0,{enabled:!!s.default_region_id}),i=(v=s.supported_currencies)==null?void 0:v.find(S=>S.is_default),c=(x=s.supported_locales)==null?void 0:x.find(S=>S.is_default),{sales_channel:n}=be(s.default_sales_channel_id,{enabled:!!s.default_sales_channel_id}),{stock_location:p}=we(s.default_location_id,{fields:"id,name"},{enabled:!!s.default_location_id});return e.jsxs(G,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:t("store.domain")}),e.jsx(d,{className:"text-ui-fg-subtle",size:"small",children:t("store.manageYourStoresDetails")})]}),e.jsx(k,{groups:[{actions:[{icon:e.jsx(Pe,{}),label:t("actions.edit"),to:"edit"}]}]})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("fields.name")}),e.jsx(d,{size:"small",leading:"compact",children:s.name})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("store.defaultCurrency")}),i?e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(P,{size:"2xsmall",children:(m=i.currency_code)==null?void 0:m.toUpperCase()}),e.jsx(d,{size:"small",leading:"compact",children:(_=i.currency)==null?void 0:_.name})]}):e.jsx(d,{size:"small",leading:"compact",children:"-"})]}),r&&e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("store.defaultLocale")}),c?e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(P,{size:"2xsmall",children:(g=c.locale_code)==null?void 0:g.toUpperCase()}),e.jsx(d,{size:"small",leading:"compact",children:(o=c.locale)==null?void 0:o.name})]}):e.jsx(d,{size:"small",leading:"compact",children:"-"})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("store.defaultRegion")}),e.jsx("div",{className:"flex items-center gap-x-2",children:a?e.jsx(P,{size:"2xsmall",asChild:!0,children:e.jsx(Q,{to:`/settings/regions/${a.id}`,children:a.name})}):e.jsx(d,{size:"small",leading:"compact",children:"-"})})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("store.defaultSalesChannel")}),e.jsx("div",{className:"flex items-center gap-x-2",children:n?e.jsx(P,{size:"2xsmall",asChild:!0,children:e.jsx(Q,{to:`/settings/sales-channels/${n.id}`,children:n.name})}):e.jsx(d,{size:"small",leading:"compact",children:"-"})})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("store.defaultLocation")}),e.jsx("div",{className:"flex items-center gap-x-2",children:p?e.jsx(P,{size:"2xsmall",asChild:!0,children:e.jsx(Q,{to:`/settings/locations/${p.id}`,children:p.name})}):e.jsx(d,{size:"small",leading:"compact",children:"-"})})]})]})},H=10,De=({store:s})=>{var h,M,w,b,U,V,$,J;const[t,r]=y.useState({}),{searchParams:a,raw:i}=pe({pageSize:H}),{currencies:c,count:n,isPending:p,isError:v,error:x}=me({code:(h=s.supported_currencies)==null?void 0:h.map(l=>l.currency_code),...a},{placeholderData:ne,enabled:!!((M=s.supported_currencies)!=null&&M.length)}),{price_preferences:m,isPending:_,isError:g,error:o}=ke({attribute:"currency_code",value:(w=s.supported_currencies)==null?void 0:w.map(l=>l.currency_code)},{enabled:!!((b=s.supported_currencies)!=null&&b.length)}),S=Me(),T=y.useMemo(()=>new Map(m==null?void 0:m.map(l=>[l.value,l])),[m]),q=c==null?void 0:c.map(l=>{var W;return{...l,is_tax_inclusive:(W=T.get(l.code))==null?void 0:W.is_tax_inclusive}}),{table:L}=oe({data:q??[],columns:S,count:n,getRowId:l=>l.code,rowSelection:{state:t,updater:r},enablePagination:!0,enableRowSelection:!0,pageSize:H,meta:{storeId:s.id,supportedCurrencies:s.supported_currencies,defaultCurrencyCode:(V=(U=s.supported_currencies)==null?void 0:U.find(l=>l.is_default))==null?void 0:V.currency_code,preferencesMap:T}}),{mutateAsync:E}=A(s.id),{t:u}=C(),z=D(),I=async()=>{var X;const l=Object.keys(t);await z({title:u("general.areYouSure"),description:u("store.removeCurrencyWarning",{count:l.length}),confirmText:u("actions.remove"),cancelText:u("actions.cancel")})&&await E({supported_currencies:((X=s.supported_currencies)==null?void 0:X.filter(B=>!l.includes(B.currency_code)))??[]},{onSuccess:()=>{r({}),j.success(u("store.toast.currenciesRemoved"))},onError:B=>{j.error(B.message)}})};if(v)throw x;if(g)throw o;const R=p||_;return e.jsxs(G,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(K,{level:"h2",children:u("store.currencies")}),e.jsx(k,{groups:[{actions:[{icon:e.jsx(re,{}),label:u("actions.add"),to:"currencies"}]}]})]}),e.jsx(ie,{orderBy:[{key:"name",label:u("fields.name")},{key:"code",label:u("fields.code")}],search:!0,pagination:!0,table:L,pageSize:H,columns:S,count:($=s.supported_currencies)!=null&&$.length?n:0,isLoading:(J=s.supported_currencies)!=null&&J.length?R:!1,queryObject:i}),e.jsx(f,{open:!!Object.keys(t).length,children:e.jsxs(f.Bar,{children:[e.jsx(f.Value,{children:u("general.countSelected",{count:Object.keys(t).length})}),e.jsx(f.Seperator,{}),e.jsx(f.Command,{action:I,shortcut:"r",label:u("actions.remove")})]})})]})},qe=({storeId:s,currency:t,supportedCurrencies:r,defaultCurrencyCode:a,preferencesMap:i})=>{var m,_;const{mutateAsync:c}=A(s),{t:n}=C(),p=D(),v=async()=>{await p({title:n("general.areYouSure"),description:n("store.removeCurrencyWarning",{count:1}),verificationInstruction:n("general.typeToConfirm"),verificationText:t.name,confirmText:n("actions.remove"),cancelText:n("actions.cancel")})&&await c({supported_currencies:r.filter(o=>o.currency_code!==t.code)},{onSuccess:()=>{j.success(n("store.toast.currenciesRemoved"))},onError:o=>{j.error(o.message)}})},x=async()=>{await c({supported_currencies:r.map(g=>{const o=i.get(g.currency_code);return{...g,is_tax_inclusive:g.currency_code===t.code?!(o!=null&&o.is_tax_inclusive):void 0}})},{onSuccess:()=>{j.success(n("store.toast.updatedTaxInclusivitySuccessfully"))},onError:g=>{j.error(g.message)}})};return e.jsx(k,{groups:[{actions:[{icon:(m=i.get(t.code))!=null&&m.is_tax_inclusive?e.jsx(ze,{}):e.jsx(ue,{}),label:(_=i.get(t.code))!=null&&_.is_tax_inclusive?n("store.disableTaxInclusivePricing"):n("store.enableTaxInclusivePricing"),onClick:x}]},{actions:[{icon:e.jsx(ce,{}),label:n("actions.remove"),onClick:v,disabled:t.code===a}]}]})},Y=ae(),Me=()=>{const s=ge(),{t}=C();return y.useMemo(()=>[Y.display({id:"select",header:({table:r})=>e.jsx(N,{checked:r.getIsSomePageRowsSelected()?"indeterminate":r.getIsAllPageRowsSelected(),onCheckedChange:a=>r.toggleAllPageRowsSelected(!!a)}),cell:({row:r})=>e.jsx(N,{checked:r.getIsSelected(),onCheckedChange:a=>r.toggleSelected(!!a),onClick:a=>{a.stopPropagation()}})}),...s,Y.accessor("is_tax_inclusive",{header:t("fields.taxInclusivePricing"),cell:({getValue:r})=>{const a=r();return e.jsx(Le,{color:a?"green":"grey",children:t(a?"fields.true":"fields.false")})}}),Y.display({id:"actions",cell:({row:r,table:a})=>{const{supportedCurrencies:i,storeId:c,defaultCurrencyCode:n,preferencesMap:p}=a.options.meta;return e.jsx(qe,{storeId:c,currency:r.original,supportedCurrencies:i,defaultCurrencyCode:n,preferencesMap:p})}})],[s,t])},F=10,We=({store:s})=>{var L,E,u,z,I,R;const[t,r]=y.useState({}),{searchParams:a,raw:i}=xe({pageSize:F}),{locales:c,count:n,isPending:p,isError:v,error:x}=Te({code:(L=s.supported_locales)==null?void 0:L.map(h=>h.locale_code),...a},{placeholderData:ne,enabled:!!((E=s.supported_locales)!=null&&E.length)}),m=Qe(),{table:_}=oe({data:c??[],columns:m,count:n,getRowId:h=>h.code,rowSelection:{state:t,updater:r},enablePagination:!0,enableRowSelection:!0,pageSize:F,meta:{storeId:s.id,supportedLocales:s.supported_locales,defaultLocaleCode:(z=(u=s.supported_locales)==null?void 0:u.find(h=>h.is_default))==null?void 0:z.locale_code}}),{mutateAsync:g}=A(s.id),{t:o}=C(),S=D(),T=async()=>{var w;const h=Object.keys(t);await S({title:o("general.areYouSure"),description:o("store.removeLocaleWarning",{count:h.length}),confirmText:o("actions.remove"),cancelText:o("actions.cancel")})&&await g({supported_locales:((w=s.supported_locales)==null?void 0:w.filter(b=>!h.includes(b.locale_code)))??[]},{onSuccess:()=>{r({}),j.success(o("store.toast.localesRemoved"))},onError:b=>{j.error(b.message)}})};if(v)throw x;const q=p;return e.jsxs(G,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(K,{level:"h2",children:o("store.locales")}),e.jsx(k,{groups:[{actions:[{icon:e.jsx(re,{}),label:o("actions.add"),to:"locales"}]}]})]}),e.jsx(ie,{orderBy:[{key:"name",label:o("fields.name")},{key:"code",label:o("fields.code")}],search:!0,pagination:!0,table:_,pageSize:F,columns:m,count:(I=s.supported_locales)!=null&&I.length?n:0,isLoading:(R=s.supported_locales)!=null&&R.length?q:!1,queryObject:i}),e.jsx(f,{open:!!Object.keys(t).length,children:e.jsxs(f.Bar,{children:[e.jsx(f.Value,{children:o("general.countSelected",{count:Object.keys(t).length})}),e.jsx(f.Seperator,{}),e.jsx(f.Command,{action:T,shortcut:"r",label:o("actions.remove")})]})})]})},Be=({storeId:s,locale:t,supportedLocales:r,defaultLocaleCode:a})=>{const{mutateAsync:i}=A(s),{t:c}=C(),n=D(),p=async()=>{await n({title:c("general.areYouSure"),description:c("store.removeLocaleWarning",{count:1}),verificationInstruction:c("general.typeToConfirm"),verificationText:t.name,confirmText:c("actions.remove"),cancelText:c("actions.cancel")})&&await i({supported_locales:r.filter(x=>x.locale_code!==t.code)},{onSuccess:()=>{j.success(c("store.toast.localesRemoved"))},onError:x=>{j.error(x.message)}})};return e.jsx(k,{groups:[{actions:[{icon:e.jsx(ce,{}),label:c("actions.remove"),onClick:p,disabled:t.code===a}]}]})},se=ae(),Qe=()=>{const s=he(),{t}=C();return y.useMemo(()=>[se.display({id:"select",header:({table:r})=>e.jsx(N,{checked:r.getIsSomePageRowsSelected()?"indeterminate":r.getIsAllPageRowsSelected(),onCheckedChange:a=>r.toggleAllPageRowsSelected(!!a)}),cell:({row:r})=>e.jsx(N,{checked:r.getIsSelected(),onCheckedChange:a=>r.toggleSelected(!!a),onClick:a=>{a.stopPropagation()}})}),...s,se.display({id:"actions",cell:({row:r,table:a})=>{const{supportedLocales:i,storeId:c,defaultLocaleCode:n}=a.options.meta;return e.jsx(Be,{storeId:c,locale:r.original,supportedLocales:i,defaultLocaleCode:n})}})],[s,t])},cs=()=>{const s=fe(),t=te("translation"),{store:r,isPending:a,isError:i,error:c}=je(void 0,{initialData:s}),{getWidgets:n}=ve();if(a||!r)return e.jsx(_e,{sections:2,showJSON:!0,showMetadata:!0});if(i)throw c;return e.jsxs(Ee,{widgets:{before:n("store.details.before"),after:n("store.details.after")},data:r,hasOutlet:!0,showMetadata:!0,showJSON:!0,children:[e.jsx(Ae,{store:r}),e.jsx(De,{store:r}),t&&e.jsx(We,{store:r})]})};export{cs as Component,ns as loader};
