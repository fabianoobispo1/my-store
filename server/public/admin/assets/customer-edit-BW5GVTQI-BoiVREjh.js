import{K as f}from"./chunk-6HTZNHPT-vT0uWT2U.js";import{R as l}from"./chunk-XXBP2Z5M-BarMMowL.js";import{u as _}from"./chunk-42OOM4DJ-BolCKpuN.js";import{b as u,ag as y,dA as b,j as e,H as g,aD as C,aE as E,ax as F,eD as v,t as j,J as s,cP as L,K as t,B as h,az as i}from"./index-COdTnWJD.js";var T=F({email:i().email(),first_name:i().optional(),last_name:i().optional(),company_name:i().optional(),phone:i().optional()}),I=({customer:r})=>{const{t:a}=u(),{handleSuccess:c}=_(),o=C({defaultValues:{email:r.email||"",first_name:r.first_name||"",last_name:r.last_name||"",company_name:r.company_name||"",phone:r.phone||""},resolver:E(T)}),{mutateAsync:m,isPending:d}=v(r.id),p=o.handleSubmit(async n=>{await m({email:r.has_account?void 0:n.email,first_name:n.first_name||null,last_name:n.last_name||null,phone:n.phone||null,company_name:n.company_name||null},{onSuccess:({customer:x})=>{j.success(a("customers.edit.successToast",{email:x.email})),c()},onError:x=>{j.error(x.message)}})});return e.jsx(l.Form,{form:o,children:e.jsxs(f,{onSubmit:p,className:"flex flex-1 flex-col",children:[e.jsx(l.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:o.control,name:"email",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("fields.email")}),e.jsx(s.Control,{children:e.jsx(L,{showTooltip:r.has_account,content:a("customers.edit.emailDisabledTooltip"),children:e.jsx(t,{...n,disabled:r.has_account})})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"first_name",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("fields.firstName")}),e.jsx(s.Control,{children:e.jsx(t,{...n})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"last_name",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("fields.lastName")}),e.jsx(s.Control,{children:e.jsx(t,{...n})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"company_name",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("fields.company")}),e.jsx(s.Control,{children:e.jsx(t,{...n})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:o.control,name:"phone",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("fields.phone")}),e.jsx(s.Control,{children:e.jsx(t,{...n})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(l.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(l.Close,{asChild:!0,children:e.jsx(h,{variant:"secondary",size:"small",children:a("actions.cancel")})}),e.jsx(h,{isLoading:d,type:"submit",variant:"primary",size:"small",children:a("actions.save")})]})})]})})},D=()=>{const{t:r}=u(),{id:a}=y(),{customer:c,isLoading:o,isError:m,error:d}=b(a);if(m)throw d;return e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsx(g,{children:r("customers.edit.header")})}),!o&&c&&e.jsx(I,{customer:c})]})};export{D as Component};
