import{u as j}from"./chunk-C76H5USB-B0s8aZMb.js";import{D as y,a as v,T as _,b as C}from"./chunk-WG7UTTKY-DCfiIrWt.js";import{D as N,a as g}from"./chunk-ROKB75YP-s4YDTFQX.js";import{g as S,a as D}from"./chunk-NTEWUH4C-Zwbwn2Hl.js";import{S as h}from"./chunk-ADOCJB6L-BM3WkecS.js";import{P as b}from"./chunk-P3UUX2T6-K6AGHv25.js";import{r as w,g as H,j as e,b as u,al as P}from"./index-COdTnWJD.js";import{R as O}from"./react-country-flag.esm-C2bcBTj9.js";var V=({prefix:t,pageSize:r=20})=>{const l=j(["offset","q","created_at","updated_at","region_id","sales_channel_id","payment_status","fulfillment_status","order"],t),{offset:n,sales_channel_id:o,created_at:m,updated_at:s,fulfillment_status:a,payment_status:c,region_id:d,q:x,order:f}=l;return{searchParams:{limit:r,offset:n?Number(n):0,sales_channel_id:o==null?void 0:o.split(","),fulfillment_status:a==null?void 0:a.split(","),payment_status:c==null?void 0:c.split(","),created_at:m?JSON.parse(m):void 0,updated_at:s?JSON.parse(s):void 0,region_id:d==null?void 0:d.split(","),order:f||"-created_at",q:x},raw:l}},T=({country:t})=>t?e.jsx("div",{className:"flex size-5 items-center justify-center",children:e.jsx(P,{content:t.display_name,children:e.jsx("div",{className:"flex size-4 items-center justify-center overflow-hidden rounded-sm",children:e.jsx(O,{countryCode:t.iso_2.toUpperCase(),svg:!0,style:{width:"16px",height:"16px"},"aria-label":t.display_name})})})}):e.jsx(b,{}),F=({customer:t})=>{if(!t)return e.jsx("span",{className:"text-ui-fg-muted",children:"-"});const{first_name:r,last_name:l,email:n}=t,o=[r,l].filter(Boolean).join(" ");return e.jsx("div",{className:"flex h-full w-full items-center",children:e.jsx("span",{className:"truncate",children:o||n})})},R=()=>{const{t}=u();return e.jsx("div",{className:"flex h-full w-full items-center",children:e.jsx("span",{className:"truncate",children:t("fields.customer")})})},q=({status:t})=>{const{t:r}=u();if(!t)return"-";const{label:l,color:n}=D(r,t);return e.jsx(h,{color:n,children:l})},E=()=>{const{t}=u();return e.jsx("div",{className:"flex h-full w-full items-center",children:e.jsx("span",{className:"truncate",children:t("fields.fulfillment")})})},I=({status:t})=>{const{t:r}=u(),{label:l,color:n}=S(r,t);return e.jsx(h,{color:n,children:l})},z=()=>{const{t}=u();return e.jsx("div",{className:"flex h-full w-full items-center",children:e.jsx("span",{className:"truncate",children:t("fields.payment")})})},J=({channel:t})=>{if(!t)return e.jsx("span",{className:"text-ui-fg-muted",children:"-"});const{name:r}=t;return e.jsx("div",{className:"flex h-full w-full items-center overflow-hidden",children:e.jsx("span",{className:"truncate",children:r})})},K=()=>{const{t}=u();return e.jsx("div",{className:"flex h-full w-full items-center",children:e.jsx("span",{className:"truncate",children:t("fields.salesChannel")})})},i=H(),W=t=>{const{exclude:r=[]}=t??{},l=w.useMemo(()=>[i.accessor("display_id",{header:()=>e.jsx(v,{}),cell:({getValue:s})=>{const a=s();return e.jsx(y,{displayId:a})}}),i.accessor("created_at",{header:()=>e.jsx(g,{}),cell:({getValue:s})=>{const a=new Date(s());return e.jsx(N,{date:a})}}),i.accessor("customer",{header:()=>e.jsx(R,{}),cell:({getValue:s})=>{const a=s();return e.jsx(F,{customer:a})}}),i.accessor("sales_channel",{header:()=>e.jsx(K,{}),cell:({getValue:s})=>{const a=s();return e.jsx(J,{channel:a})}}),i.accessor("payment_status",{header:()=>e.jsx(z,{}),cell:({getValue:s})=>{const a=s();return e.jsx(I,{status:a})}}),i.accessor("fulfillment_status",{header:()=>e.jsx(E,{}),cell:({getValue:s})=>{const a=s();return e.jsx(q,{status:a})}}),i.accessor("total",{header:()=>e.jsx(C,{}),cell:({getValue:s,row:a})=>{const c=a.original.payment_status==="refunded",d=c?a.original.payment_collections.reduce((f,p)=>f+(p.refunded_amount??0),0):s(),x=a.original.currency_code;return e.jsx(_,{currencyCode:x,total:d,className:c?"text-ui-fg-muted line-through":""})}}),i.display({id:"actions",cell:({row:s})=>{var c;const a=(c=s.original.shipping_address)==null?void 0:c.country;return e.jsx(T,{country:a})}})],[]),n=s=>s.accessorKey!==void 0,o=s=>s.id!==void 0,m=s=>n(s)?r.includes(s.accessorKey):o(s)?r.includes(s.id):!1;return l.filter(s=>!m(s))};export{W as a,V as u};
